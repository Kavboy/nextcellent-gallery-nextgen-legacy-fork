function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}shutterOnload=function(){shutterReloaded.init("sh")},document.addEventListener("DOMContentLoaded",function(){shutterReloaded.init("sh")}),shutterReloaded={settings:function(){var e=shutterSettings;this.keyEventlistenerIsSet=!1,this.imageCount=e.imageCount||0,this.currentTabElement=this.currentTabElement||0},init:function(t){var l,u,h=this;shutterLinks={},shutterSets={},"object"!==("undefined"==typeof shutterSettings?"undefined":_typeof(shutterSettings))&&(shutterSettings={}),this.mobileOS="undefined"!=typeof orientation,_toConsumableArray(document.links).filter(function(e){return"sh"==t&&e.className.includes("shutterset")||"sh"==t&&e.className.includes("shutter")||"lb"==t&&e.rel.includes("lightbox[")}).forEach(function(e,t){var n=e.children[0];if(l=e.className&&e.className.includes("shutterset")?e.className.replace(/\s/g,"_"):e.rel&&e.rel.includes("lightbox[")?e.rel.replace(/\s/g,"_"):e.className){if(shutterSets[l]||"shutter"===l)if("shutter"===l){var i,r=0,o=_createForOfIteratorHelper(Object.keys(shutterSets).filter(function(e){return!e.includes("shutterset")&&e.includes("shutter")}));try{for(o.s();!(i=o.n()).done;){var s=i.value,a=shutterSets[s][0].set;r===parseInt(a.substr(a.indexOf("_")+1,a.length-1),10)&&r++}}catch(e){o.e(e)}finally{o.f()}l="shutter_"+r,shutterSets[l]=[],u=0}else u=shutterSets[l].length;else shutterSets[l]=[],u=0;var d=e.href.slice(e.href.lastIndexOf("/")+1).split(".")[0],n=n&&n.alt?n.alt:"",d=e.title&&e.title!=d?e.title:"",n={src:e.href,num:u,set:l,description:d,alt:n};shutterSets[l].push(n)}e.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault();var e=Object.entries(shutterSets).map(function(e){return e[1][0]}).find(function(e){return"IMG"===t.target.tagName?e.src===t.target.parentElement.href:"A"===t.target.tagName?e.src===t.target.href:void 0});return h.createShutter(e),!1})}),this.settings()},createShutter:function(e,t){this.Top||(void 0!==window.pageYOffset?this.Top=window.pageYOffset:this.Top=(0<document.documentElement.scrollTop?document.documentElement:document.body).scrollTop),void 0===this.pgHeight&&(this.pgHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)),this.FS=t?0<t?1:0:shutterSettings.FS||0,this.resizing&&(this.resizing=null),this.mobileOS?window.onorientationchange=function(){shutterReloaded.resize(e)}:window.onresize=function(){shutterReloaded.resize(e)},document.documentElement.style.overflowX="hidden",this.VP||(this._viewPort(),this.VP=!0);var n=this.createShadowBox();n.style.height=this.pgHeight+"px";var i=document.getElementById("shLoadError");i||((i=document.createElement("div")).id="shLoadError",i.innerText="Image load failed, please try again",n.appendChild(i)),i.style.top=this.Top+.5*(this.wHeight-i.clientHeight)+"px";var r=document.getElementById("shSpinner");r||((r=document.createElement("div")).id="shSpinner",n.appendChild(r)),r.style.display="block",r.style.top=this.Top+.5*(this.wHeight-r.clientHeight)+"px";var o=document.getElementById("shDisplay");o||(o=this.createImageBox(),n.appendChild(o)),o.style.visibility="hidden";t=document.getElementById("shDescription");t?t.innerText=e.description:((t=document.createElement("div")).id="shDescription",t.innerText=e.description,t.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault()}));i=document.getElementById("shWrap");i||((i=document.createElement("div")).id="shWrap");r=(r=document.getElementById("shCrossClose"))||this.createCrossCloseDiv(),n=document.getElementById("shutterImg");n?this.setImgAttributes(n,e):(s=this.createImage(e),i.appendChild(s));var s=this.createNavigation(e);1<shutterSets[e.set].length&&i.appendChild(s),e.description&&" "!==e.description?i.appendChild(t):(t.parentElement&&t.parentElement.removeChild(t),s.style.borderRadius="0 0 5px 5px"),o.appendChild(r),o.appendChild(i),this.keyEventlistenerIsSet||(document.addEventListener("keydown",this.functionEventHandler),this.keyEventlistenerIsSet=!0)},functionEventHandler:function(e){e.stopPropagation(),shutterReloaded.handleKeys(e)},createCrossCloseDiv:function(){var t=this,e=document.createElement("button");return e.id="shCrossClose",e.role="button",e["aria-label"]="Close shutter",e.tabIndex=19,e.innerText="X",e.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),t.hideShutter()}),e},createShadowBox:function(){var t=this,e=document.getElementById("shShutter");return e||((e=document.createElement("div")).setAttribute("id","shShutter"),document.getElementsByTagName("body")[0].appendChild(e),this.hideTags(),e.addEventListener("click",function(e){e.stopPropagation(),t.hideShutter()})),e},createImageBox:function(){var e=document.getElementById("shDisplay");return e||((e=document.createElement("div")).id="shDisplay"),e},createImage:function(e){var t=this,n=document.createElement("img");return this.setImgAttributes(n,e),n.addEventListener("load",function(e){e.stopPropagation(),t.showImg()}),n.addEventListener("error",function(e){e.stopPropagation(),t.hideSpinner(),document.getElementById("shLoadError").style.display="block"}),n.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault()}),n},hideSpinner:function(){document.getElementById("shSpinner").style.display="none"},setImgAttributes:function(e,t){e.src=t.src,e.id="shutterImg",e.alt=t.alt,e.title=t.description},getPreviousImage:function(t){return shutterSets[t.set].find(function(e){return e.num===t.num-1})},getNextImage:function(t){return shutterSets[t.set].find(function(e){return e.num===t.num+1})},getImgCountText:function(e){var t="";return 0<=e.num&&this.imageCount&&(t="(",t+=e.num+1,t+=" / ",t+=shutterSets[e.set].length,t+=")"),t},createNavigation:function(e){var t=this,n=this.getPreviousImage(e),i=this.getNextImage(e),r=document.getElementById("shNavBar");r||((r=document.createElement("div")).id="shNavBar",r.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault()}));var o=document.getElementById("shPrev");o||((o=document.createElement("div")).id="shPrev");var s=document.getElementById("shNext");s||((s=document.createElement("div")).id="shNext");var a=document.getElementById("shCount");a||((a=document.createElement("div")).id="shCount"),a.innerText=this.getImgCountText(e);e=document.getElementById("prevpic");n?e?((d=e.cloneNode(!0)).addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),t.createShutter(n)}),e.parentNode.replaceChild(d,e)):((e=document.createElement("button")).id="prevpic",e.innerText="<<",e.tabIndex="20",e["aria-lable"]="Previous picture",e.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),t.createShutter(n)}),o.appendChild(e)):e&&e.parentNode.removeChild(e);var d=document.getElementById("nextpic");return i?d?((e=d.cloneNode(!0)).addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),t.createShutter(i)}),d.parentNode.replaceChild(e,d)):((d=document.createElement("button")).id="nextpic",d.innerText=">>",d.tabIndex="20",d["aria-lable"]="Next picture",d.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),t.createShutter(i)}),s.appendChild(d)):d&&d.parentNode.removeChild(d),r.appendChild(o),r.appendChild(a),r.appendChild(s),r},hideShutter:function(){var e;(e=document.getElementById("shDisplay"))&&e.parentNode.removeChild(e),(e=document.getElementById("shSpinner"))&&e.parentNode.removeChild(e),(e=document.getElementById("shShutter"))&&e.parentNode.removeChild(e),this.hideTags(!0),window.scrollTo(0,this.Top),window.onresize=this.FS=this.Top=this.VP=null,document.documentElement.style.overflowX="",this.keyEventlistenerIsSet&&(document.removeEventListener("keydown",this.functionEventHandler),this.keyEventlistenerIsSet=!1)},resize:function(e){var t,n,i=document.getElementById("shShutter"),r=document.getElementById("shDisplay"),o=document.getElementById("shutterImg"),s=document.getElementById("shNavBar"),a=document.getElementById("shDescription"),d=document.getElementById("shCrossClose");i&&(this._viewPort(),r.style.top=this.Top+"px",o.height>this.wHeight&&(o.width=o.width*(this.wHeight/o.height),o.height=this.wHeight),t=o.naturalHeight*((this.wWidth-40)/o.width),n=this.wWidth-40,this.wWidth<=o.naturalWidth&&(o.height=t<o.naturalHeight?t:o.naturalHeight,o.width=n<o.naturalWidth?n:o.naturalWidth),s&&(s.style.width=o.width+4+"px"),a&&(a.style.width=o.width+4+"px"),d.style.left=(this.wWidth-o.width)/2+(o.width-d.clientWidth/2)+"px",(d=this.Top+o.height+10)>this.pgHeight&&(i.style.height=d+"px"),o=30<(o=.2*(this.wHeight-o.height))?Math.floor(o):30,r.style.top=this.Top+o+"px")},_viewPort:function(){var e=window.innerHeight||0,t=document.body.clientHeight||0,n=document.documentElement?document.documentElement.clientHeight:0;0<e?(this.wHeight=1<e-t&&e-t<30?t:e,this.wHeight=1<this.wHeight-n&&this.wHeight-n<30?n:this.wHeight):this.wHeight=0<n?n:t;n=document.documentElement?document.documentElement.clientWidth:0,t=window.innerWidth||document.body.clientWidth;this.wWidth=1<n?n:t},showImg:function(){var e=document.getElementById("shShutter"),t=document.getElementById("shDisplay");e&&(this.resize(),this.hideSpinner(),t.style.visibility="visible")},hideTags:function(e){var t=document.getElementsByTagName("select"),n=document.getElementsByTagName("object"),r=document.getElementsByTagName("embed"),o=document.getElementsByTagName("iframe"),s=e?"visible":"hidden";for(i=0;i<t.length;i++)t[i].style.visibility=s;for(i=0;i<n.length;i++)n[i].style.visibility=s;for(i=0;i<r.length;i++)r[i].style.visibility=s;for(i=0;i<o.length;i++)o[i].style.visibility=s},getCurrentTabElements:function(){var e=document.getElementById("nextpic"),t=document.getElementById("prevpic"),n=document.getElementById("shCrossClose"),i=[];return e&&i.push(e),t&&i.push(t),n&&i.push(n),i},handleKeys:function(e){var t=this,n=0;e||window.event,e.keyCode?n=e.keyCode:e.which&&(n=e.which);var i=document.getElementById("nextpic"),r=document.getElementById("prevpic"),o=document.getElementById("shShutter");switch(n){case 39:i&&i.click();break;case 37:r&&r.click();break;case 27:o&&this.hideShutter();break;case 9:var s=this.getCurrentTabElements();0!==this.currentTabElement&&0!==this.currentTabElement&&this.currentTabElement>=s.length-1?(window.setTimeout(function(){s[t.currentTabElement].focus()},0),this.currentTabElement=0):(window.setTimeout(function(){s[t.currentTabElement].focus()},0),this.currentTabElement++)}}};